#!/bin/bash

PATH_SUBSTR=$1
DEFAULT_OPEN_CMD=open

FIND_CMD="find -L . -name \"*$PATH_SUBSTR*\""
OPEN_CMD=${2:-"$DEFAULT_OPEN_CMD"}

NUM_MATCHES=`eval $FIND_CMD | wc -l`
if (( $NUM_MATCHES > 1 )) ;then
	echo Multiple results, pick one:
	echo
	I=0
	for MATCH_I in `eval $FIND_CMD` ;do
		I=$(( I + 1 ))
		echo
		echo $I\) "$MATCH_I"
	done
	echo
	echo
	read -p "pick a number: "
	SELECTED_INDEX=$REPLY

	I=0
	for MATCH_I in `eval $FIND_CMD` ;do
		I=$(( I + 1 ))
		if [ $I = $SELECTED_INDEX ] ;then
			MATCH=$MATCH_I
		fi
	done
else
	MATCH=`eval $FIND_CMD`
fi
echo opening "$MATCH"
$OPEN_CMD "$MATCH"
